{"ast":null,"code":"import { __decorate, __param } from \"tslib\";\nimport { Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Component, Inject } from '@angular/core';\nlet RefernceModalComponent = class RefernceModalComponent {\n  constructor(data, ref, builder, apiService, toastService) {\n    this.data = data;\n    this.ref = ref;\n    this.builder = builder;\n    this.apiService = apiService;\n    this.toastService = toastService;\n    this.errorMessage = '';\n    this.myForm = this.builder.group({\n      name: this.builder.control('', Validators.required)\n    });\n  }\n\n  ngOnInit() {\n    this.inputdata = this.data;\n\n    if (this.inputdata.id > 0) {\n      this.setEditData(this.inputdata.id);\n    }\n  }\n\n  closepopup() {\n    this.ref.close();\n  }\n\n  setEditData(id) {\n    this.apiService.getReferenceById(id).subscribe(item => {\n      this.editData = item;\n      console.log('item', item);\n      this.myForm.setValue({\n        name: this.editData.referenceName\n      });\n    });\n  }\n\n  onFormSubmit() {\n    if (this.myForm.valid) {\n      if (this.inputdata.id > 0) {\n        this.updateReferenceData();\n      } else {\n        this.saveReference();\n      }\n    } else {\n      this.toastService.showError('Please fill out all the fields.');\n    }\n  }\n\n  updateReferenceData() {\n    const updatedData = Object.assign({\n      id: this.editData.countyEntryId\n    }, this.myForm.value);\n    this.apiService.updateReferenceById(updatedData).subscribe(response => {\n      // Handle the response as needed\n      this.toastService.showSuccess('Reference Updated successfully!');\n      this.closepopup();\n    }, error => {\n      console.error('Error creating post:', error);\n      this.toastService.showError('Error While Updating'); // Optionally, you can handle errors, show a message, etc.\n    });\n  }\n\n  saveReference() {\n    this.apiService.createReference(this.myForm.value).subscribe(res => {\n      this.toastService.showSuccess('Reference Added successfully!');\n      this.closepopup();\n    }, error => {\n      console.error('Error creating post:', error);\n      this.toastService.showError('Error While Adding'); // Optionally, you can handle errors, show a message, etc.\n    });\n  }\n\n};\nRefernceModalComponent = __decorate([Component({\n  selector: 'app-countries-modal',\n  templateUrl: './countries-modal.component.html',\n  styleUrls: ['./countries-modal.component.scss']\n}), __param(0, Inject(MAT_DIALOG_DATA))], RefernceModalComponent);\nexport { RefernceModalComponent };","map":null,"metadata":{},"sourceType":"module"}